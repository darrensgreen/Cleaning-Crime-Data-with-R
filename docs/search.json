[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "",
    "text": "Welcome! This guide provides a standard workflow for cleaning, preparing, and exploring crime data using R. After receiving requests to help people learn R, I developed this guide as a supplementary resource, replacing emails containing random chunks of code. I have structured this guide based on the order of steps I have found to be effective for me when analysing crime data. Specifically, I have found the following workflow to be most effective;\n\nSetting up my library and project settings\nLoading my data\nReviewing my data\nTransform my data in this specific order\n\nFormat column names\nFormat dates\nFormat remaining variables (renaming categorical variables, addressing NA values or ensuring R is recognising numeric variables as numeric)\nOnce the above steps have been completed, my data is suitably structured for creating dummy variables or calculating new variables.\n\n\nI have found this workflow to be reliable for analysing data related to crime, road safety, offender recidivism, as well as other content obtained online.\nThe purpose of this guide is just to get you started and provide a structure that will hopefully assist you in your data cleaning process. This is not a comprehensive or definitive guide. As you proceed through your R journey, you will see that the flexibility and capabilities of R prevent this from being possible in a single guide. I find that I continue to refine and adjust my coding practices as I come across new problems and see how other members of the R community set up their code. Nonetheless, I hope you find this to be a useful starting point.\nYou may also note that some of the code I present in this guide is not covered within the text. This has been done in an effort to keep it concise. However, I have added notes to any relevant code. If you would like to know more about any code, copying and pasting it into a common search engine provides more information.\nI have structured this guide to allow you to work through each step with your own data set or use the Queensland Police Service (QPS) open dataset, which you can download directly from the Open Data Portal (Queensland Police Service 2022). A copy is also available on the GitHub page associated with this site.\nFinally, some reassurance regarding the safety of your original data. You don’t need to stress about corrupting your data. Unless you explicitly tell R to overwrite your CSV file, which requires you to call the relevant function and enter the correct arguments, any data manipulation you complete remains within the RStudio IDE."
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "",
    "text": "Welcome! This guide provides a standard workflow for cleaning, preparing, and exploring crime data using R. After receiving requests to help people learn R, I developed this guide as a supplementary resource, replacing emails containing random chunks of code. I have structured this guide based on the order of steps I have found to be effective for me when analysing crime data. Specifically, I have found the following workflow to be most effective;\n\nSetting up my library and project settings\nLoading my data\nReviewing my data\nTransform my data in this specific order\n\nFormat column names\nFormat dates\nFormat remaining variables (renaming categorical variables, addressing NA values or ensuring R is recognising numeric variables as numeric)\nOnce the above steps have been completed, my data is suitably structured for creating dummy variables or calculating new variables.\n\n\nI have found this workflow to be reliable for analysing data related to crime, road safety, offender recidivism, as well as other content obtained online.\nThe purpose of this guide is just to get you started and provide a structure that will hopefully assist you in your data cleaning process. This is not a comprehensive or definitive guide. As you proceed through your R journey, you will see that the flexibility and capabilities of R prevent this from being possible in a single guide. I find that I continue to refine and adjust my coding practices as I come across new problems and see how other members of the R community set up their code. Nonetheless, I hope you find this to be a useful starting point.\nYou may also note that some of the code I present in this guide is not covered within the text. This has been done in an effort to keep it concise. However, I have added notes to any relevant code. If you would like to know more about any code, copying and pasting it into a common search engine provides more information.\nI have structured this guide to allow you to work through each step with your own data set or use the Queensland Police Service (QPS) open dataset, which you can download directly from the Open Data Portal (Queensland Police Service 2022). A copy is also available on the GitHub page associated with this site.\nFinally, some reassurance regarding the safety of your original data. You don’t need to stress about corrupting your data. Unless you explicitly tell R to overwrite your CSV file, which requires you to call the relevant function and enter the correct arguments, any data manipulation you complete remains within the RStudio IDE."
  },
  {
    "objectID": "index.html#starting-your-project",
    "href": "index.html#starting-your-project",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Starting Your Project",
    "text": "Starting Your Project\nOnce you have opened R, click on the ‘File’ menu in the top left of your window and select ‘New Project…’. This will open the New Project Wizard.\nFigure 1: New Project Wizard\n\nSelect ‘New Directory’. In the next window, you are presented with several options, including Quarto Website (used to create this page), book formats and journal article formats further down. Assuming this is your first project, we will keep things simple and select the top option, ‘New Project’.\nFigure 2: New Project Wizard - Project Type Screen\n\nIn the next window, create a project name and select the folder you want your project created in.\nNote: In the example below, a project folder called “Cleaning Crime Data with R” will be created within the Websites folder.\nFigure 3: New Project Wizard - Create New Project Screen\n\nClick on ‘Create Project’ and R will set up the project for you."
  },
  {
    "objectID": "index.html#r-file-types",
    "href": "index.html#r-file-types",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "R File Types",
    "text": "R File Types\nOnce you have created your project, you will need to create a file to write your code in. While some project types (e.g. book) automatically create the files for you, it is worth having a basic understanding of the file types available. The most common files I have used are the R Script and Quarto Documents. To create a new file, click on the blank page icon with the green plus symbol in the top left-hand corner of your window and select your desired file type.\nFigure 4: Creating a New File Type\n\nPersonally, I have a strong preference for Quarto Documents. My preference is based on several capabilities I have found beneficial to my research and work;\n\nI can break my code into manageable chunks (e.g. load libraries, load data, format data, extract burglary data, summarise burglary data, etc), as you will see in this guide.\nI can make notes to record my decision-making and thought process as I progress through my analysis. This website was written using a Quarto template.\nI can produce a single, self-contained document that includes my code, its output (like tables and plots), and my written analysis. This makes my work fully reproducible and easy to share with others as a polished report, a PDF, or even a website like this one."
  },
  {
    "objectID": "index.html#adjusting-your-view",
    "href": "index.html#adjusting-your-view",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Adjusting Your View",
    "text": "Adjusting Your View\nIf you are not used to markdown format, the initial layout may be confronting. Let’s change your view to ‘Visual’ instead of ‘Source’ by clicking the ‘Visual’ button near the top left of your window.\nFigure 5: The Source/Visual Toggle Button\n\nFigure 6: Source Layout\n\nFigure 7: Visual Layout"
  },
  {
    "objectID": "index.html#creating-and-labelling-code-chunks",
    "href": "index.html#creating-and-labelling-code-chunks",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Creating and Labelling Code Chunks",
    "text": "Creating and Labelling Code Chunks\nIn the next step, we will load a couple of libraries that contain useful functions to assist you in your data preparation process. Before we do that, we have you create a code chunk. In the top right of your window, you will see a c with a plus symbol to the left of it. Click on this and select the R format. Alternatively, you can use a keyboard shortcut Ctrl+Alt+I.\nFigure 8: Insert a new code chunk\n\nA blank code chunk will import where your cursor is placed. It is good practice to give each chunk a unique label by typing #| label: your-unique-label on the line immediately after {r}. Labels must be unique, or you will get an error when you render your file. It is also best practice to avoid spaces; this will help you debug where errors occur when rendering your document. In the code chunk below, I have added a label called blank-chunk. To ensure the label is visible to you, I have commented this out by placing a # in front.\n\n# #| label: blank-chunk # Deleting the first # will make this a chunk label.\n# This is where your R code will go."
  },
  {
    "objectID": "index.html#installing-packages",
    "href": "index.html#installing-packages",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Installing Packages",
    "text": "Installing Packages\nIf this is your first time using R, you will be able to commence formatting and analysing data immediately, using base R commands. However, the true strength of R is realised by using packages. A package contains functions that greatly enhance the user experience. For most data wrangling tasks, the tidyverse is our best friend. Tidyverse is a meta package that loads many of the key packages we will be using, saving you from having to load each one individually. Once you have installed a package on your current device, it is placed in a library for you to call whenever you need. You don’t have to install the package every time.\n\ninstall.packages(\"tidyverse\")\ninstall.packages(\"explore\")\ninstall.packages(\"skimr\")"
  },
  {
    "objectID": "index.html#loading-essential-libraries-packages",
    "href": "index.html#loading-essential-libraries-packages",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Loading Essential Libraries (Packages)",
    "text": "Loading Essential Libraries (Packages)\nOnce you have installed the required packages, during this session or previously, you need to load them using the library() command. Following this guide, you will need to load the required libraries every time you start a new R session.\n\n# The 'tidyverse' is a collection of R packages for data science.\n# It includes ggplot2 (for data visualisation), dplyr (for data manipulation),\n# readr (for reading data), and more.\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n# 'explore' is great for a quick, interactive first look at our data.\nlibrary(explore)\n\n# 'skimr' provides additional summary data capability\nlibrary(skimr)\n\n\noptions(scipen = 999) # Removes scientific notation\ntheme_update(plot.title = element_text(hjust = 0.5)) # sets a project wide setting to center plot titles, saving you from having to type this line for every plot\n\nThroughout this guide, we will cover the functions I use most frequently. However, these only represent a small proportion of the functions available. If you would like to know more about a package, you can try searching for details within common search engines or use the R help() function.\n\nhelp(package = \"dplyr\") # Part of the tidyverse package\nhelp(package = \"lubridate\") # Part of the tidyverse package\nhelp(package = \"tidyverse\")\nhelp(package = \"explore\")\nhelp(package = \"skimr\")"
  },
  {
    "objectID": "index.html#loading-data",
    "href": "index.html#loading-data",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Loading Data",
    "text": "Loading Data\nGetting your data into R is the first step. Crime data often comes in CSV (Comma-Separated Values) files, and this will be the focus of this guide.\n\nLoading a Single CSV File\nIf your data is in a single CSV file located in your R project’s working directory, you can load it easily with read.csv(). This method provides a sound starting point and is recommended. However, I have provided additional methods I have found to be useful in the following sections. Out of habit, I tend to use the base R read.csv() method. However, there is a tidyverse method, specifically readr, that provides additional functionality. For example, the read_csv() method includes the argument trim_ws = TRUE to remove white spaces on either side of strings, saving you formatting time down the track.\nDuring this initial load, I tend to label my initial dataset ‘raw’ or similar. I then create a copy of the data set when I start formatting, so I can fall back on a pre-loaded dataset without having to load everything all over again. This is useful if you have a reasonably sized dataset to avoid waiting to reload your raw data when you make a formatting mistake (e.g. accidentally deleting all of your date data). However, it can also be problematic when working with very large datasets, taking up memory. Ultimately, I developed this habit when I first started learning R. Often, I would import the data once and then start working on it. Then I would make a mistake formatting and transforming my data, and would have to start all over again.\n\n\nLoading a CSV from your Project Directory\nOnce you have set up a project, you can place your data inside your directory. In this case, you can access using this method. However, this won’t work if your data is stored in a central repository outside of your project folder.\n\n## Base R\n# Replace \"your_crime_data.csv\" with the actual name of your file.\nraw &lt;- read.csv(\"your_crime_data.csv\")\n\n## Tidyverse method\nraw &lt;- read_csv(\"your_crime_data.csv\")\n\n\n# If you are using the supplied data set this would be \nraw &lt;- read.csv(\"Qld LGA Reported Offences.csv\")\n\n\n\nLoading a CSV from a Specific Directory\nIf the file is not in your R project directory, you need to provide the full path to the file. You can do this one of two ways. You can put the entire file path in each line of code, or you can leverage the file.path() function.\n\nOption 1\n\nraw &lt;- read.csv(\"C:/Users/YourUser/Documents/Data/your_crime_data.csv\")\n\n\n\nOption 2\nThis can be handy if you are loading multiple files or cannot store/access your data from a central repository such as OneDrive or GitHub, due to security limitations.\n\ndir &lt;- \"C:/Users/YourUser/Documents/Data\"\n\nraw &lt;- read.csv(file.path(dir, \"your_csv_file_name.csv\"))\n\nTip: A quick way to get your file path is to right-click on your file and select ‘Copy Path’. Delete the file name and forward slash (/index.qmd in this example)\nFigure 9: Obtaining your directory file path\n\nCopy file path raw: “C:/Users/your_folder/Documents/R Projects/Websites/Cleaning Crime Data with R/index.qmd”\nCopy file path for importing data: “C:/Users/your_folder/Documents/R Projects/Websites/Cleaning Crime Data with R”\n\n\n\nLoading Multiple CSV Files at Once\nOften, data is split across multiple files (e.g., one for each month). You can load and combine them all in one go using the tidyverse map_dfr() function. This code finds all files in a directory that end with .csv and stacks them into a single data frame. You may note that in this code chunk, I have used the read_csv() function call. I have done this for the sake of consistency, but I have previously used this method, using the read.csv() function.\n\n# 1. Get a list of all CSV files in the \"data_folder\" directory.\nfiles_to_load &lt;- list.files(path = \"data_folder/\", pattern = \"*.csv\", full.names = TRUE)\n\n# 1b. Get a list of all CSV files in the \"data_folder\" directory, using a directory variable.\nfiles_to_load &lt;- list.files(path = dir, pattern = \"*.csv\", full.names = TRUE)\n\n# 2. Read each CSV and combine them into one data frame.\nall_crime_data &lt;- map_dfr(files_to_load, read_csv)\n\nWarning: If the column names of your raw data are not in the first row, you will need to amend the above code. How you amend this is dependent on the layout of your raw data and beyond the scope of this guide."
  },
  {
    "objectID": "index.html#initial-data-exploration",
    "href": "index.html#initial-data-exploration",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Initial Data Exploration",
    "text": "Initial Data Exploration\nBefore cleaning, you need to understand your data’s structure, identify missing values, and check data types.\nThe explore() function from the explore package is fantastic for an initial interactive overview.\n\n# This will generate an interactive report in your Viewer pane.\nexplore(raw)\n\nFor a quick summary in the console, glimpse() is your best bet. It shows you the data type of each column and the first few values.\n\n# Get a quick look at the structure of the data\nglimpse(raw)\n\nYou can also double-click on your file in the environment window to open it in the RStudio viewer, reviewing just as you would a spreadsheet.\nFigure 10: RStudio Viewer\n\nA common challenge when dealing with operational data is the impact of missing and NA values within the dataset. Some functions, such as mean(), will not handle NA values unless you explicitly ignore NA values by including an additional argument. Obviously, excluding NA values may adversely impact your data analysis. The skimr package can be very useful for summarising your data and identifying missing values.\n\nlibrary(skimr)\n\nskim(raw)\n\n\nData summary\n\n\nName\nraw\n\n\nNumber of rows\n19812\n\n\nNumber of columns\n91\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n2\n\n\nnumeric\n89\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nLGA.Name\n0\n1\n18\n40\n0\n78\n0\n\n\nMonth.Year\n0\n1\n5\n5\n0\n254\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nX_id\n0\n1\n9906.50\n5719.38\n1\n4953.75\n9906.5\n14859.25\n19812\n▇▇▇▇▇\n\n\nHomicide..Murder.\n0\n1\n0.05\n0.28\n0\n0.00\n0.0\n0.00\n8\n▇▁▁▁▁\n\n\nOther.Homicide\n0\n1\n0.12\n0.51\n0\n0.00\n0.0\n0.00\n17\n▇▁▁▁▁\n\n\nAttempted.Murder\n0\n1\n0.07\n0.41\n0\n0.00\n0.0\n0.00\n14\n▇▁▁▁▁\n\n\nConspiracy.to.Murder\n0\n1\n0.00\n0.05\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nManslaughter..excl..by.driving.\n0\n1\n0.01\n0.09\n0\n0.00\n0.0\n0.00\n3\n▇▁▁▁▁\n\n\nManslaughter.Unlawful.Striking.Causing.Death\n0\n1\n0.00\n0.03\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nDriving.Causing.Death\n0\n1\n0.03\n0.21\n0\n0.00\n0.0\n0.00\n5\n▇▁▁▁▁\n\n\nAssault\n0\n1\n22.75\n48.97\n0\n2.00\n7.0\n18.00\n514\n▇▁▁▁▁\n\n\nGrievous.Assault\n0\n1\n0.98\n2.42\n0\n0.00\n0.0\n1.00\n128\n▇▁▁▁▁\n\n\nSerious.Assault\n0\n1\n10.42\n22.00\n0\n1.00\n3.0\n9.00\n238\n▇▁▁▁▁\n\n\nSerious.Assault..Other.\n0\n1\n2.64\n6.48\n0\n0.00\n0.0\n2.00\n80\n▇▁▁▁▁\n\n\nCommon.Assault.\n0\n1\n8.71\n19.58\n0\n0.00\n2.0\n7.00\n209\n▇▁▁▁▁\n\n\nSexual.Offences\n0\n1\n6.69\n16.76\n0\n0.00\n1.0\n5.00\n765\n▇▁▁▁▁\n\n\nRape.and.Attempted.Rape\n0\n1\n1.82\n4.91\n0\n0.00\n0.0\n1.00\n155\n▇▁▁▁▁\n\n\nOther.Sexual.Offences\n0\n1\n4.87\n13.17\n0\n0.00\n1.0\n3.00\n750\n▇▁▁▁▁\n\n\nRobbery\n0\n1\n2.05\n7.53\n0\n0.00\n0.0\n1.00\n128\n▇▁▁▁▁\n\n\nArmed.Robbery\n0\n1\n1.00\n3.76\n0\n0.00\n0.0\n0.00\n56\n▇▁▁▁▁\n\n\nUnarmed.Robbery\n0\n1\n1.05\n4.01\n0\n0.00\n0.0\n0.00\n74\n▇▁▁▁▁\n\n\nOther.Offences.Against.the.Person\n0\n1\n4.58\n11.23\n0\n0.00\n1.0\n3.00\n145\n▇▁▁▁▁\n\n\nKidnapping…Abduction.etc.\n0\n1\n0.34\n1.14\n0\n0.00\n0.0\n0.00\n29\n▇▁▁▁▁\n\n\nExtortion\n0\n1\n0.07\n0.41\n0\n0.00\n0.0\n0.00\n9\n▇▁▁▁▁\n\n\nStalking\n0\n1\n0.75\n2.24\n0\n0.00\n0.0\n0.00\n34\n▇▁▁▁▁\n\n\nLife.Endangering.Acts\n0\n1\n3.43\n8.27\n0\n0.00\n0.0\n3.00\n107\n▇▁▁▁▁\n\n\nOffences.Against.the.Person\n0\n1\n36.25\n80.56\n0\n3.00\n9.0\n26.00\n1245\n▇▁▁▁▁\n\n\nUnlawful.Entry\n0\n1\n49.08\n147.27\n0\n1.00\n7.0\n23.00\n2418\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Intent…Dwelling\n0\n1\n28.96\n92.70\n0\n0.00\n3.0\n11.00\n1712\n▇▁▁▁▁\n\n\nUnlawful.Entry.Without.Violence…Dwelling\n0\n1\n28.30\n91.39\n0\n0.00\n2.0\n11.00\n1691\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Violence…Dwelling\n0\n1\n0.66\n1.67\n0\n0.00\n0.0\n1.00\n21\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Intent…Shop\n0\n1\n4.43\n14.64\n0\n0.00\n0.0\n2.00\n264\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Intent…Other\n0\n1\n15.69\n42.23\n0\n0.00\n3.0\n10.00\n611\n▇▁▁▁▁\n\n\nArson\n0\n1\n1.45\n3.90\n0\n0.00\n0.0\n1.00\n46\n▇▁▁▁▁\n\n\nOther.Property.Damage\n0\n1\n43.63\n114.76\n0\n1.00\n7.0\n25.00\n1912\n▇▁▁▁▁\n\n\nUnlawful.Use.of.Motor.Vehicle\n0\n1\n13.54\n43.59\n0\n0.00\n1.0\n5.00\n717\n▇▁▁▁▁\n\n\nOther.Theft..excl..Unlawful.Entry.\n0\n1\n110.57\n323.86\n0\n1.00\n9.0\n47.00\n3609\n▇▁▁▁▁\n\n\nStealing.from.Dwellings\n0\n1\n8.34\n20.82\n0\n0.00\n1.0\n5.00\n241\n▇▁▁▁▁\n\n\nShop.Stealing\n0\n1\n18.88\n62.43\n0\n0.00\n1.0\n6.00\n951\n▇▁▁▁▁\n\n\nVehicles..steal.from.enter.with.intent.\n0\n1\n31.75\n95.53\n0\n0.00\n2.0\n12.00\n1325\n▇▁▁▁▁\n\n\nOther.Stealing\n0\n1\n51.59\n152.01\n0\n0.00\n4.0\n24.00\n1714\n▇▁▁▁▁\n\n\nFraud\n0\n1\n25.43\n94.24\n0\n0.00\n1.0\n9.00\n1980\n▇▁▁▁▁\n\n\nFraud.by.Computer\n0\n1\n1.13\n14.49\n0\n0.00\n0.0\n0.00\n1290\n▇▁▁▁▁\n\n\nFraud.by.Cheque\n0\n1\n1.14\n6.41\n0\n0.00\n0.0\n0.00\n258\n▇▁▁▁▁\n\n\nFraud.by.Credit.Card\n0\n1\n8.45\n33.42\n0\n0.00\n0.0\n1.00\n733\n▇▁▁▁▁\n\n\nIdentity.Fraud\n0\n1\n0.79\n5.06\n0\n0.00\n0.0\n0.00\n222\n▇▁▁▁▁\n\n\nOther.Fraud\n0\n1\n13.92\n60.48\n0\n0.00\n0.0\n4.00\n1957\n▇▁▁▁▁\n\n\nHandling.Stolen.Goods\n0\n1\n6.10\n20.27\n0\n0.00\n0.0\n3.00\n498\n▇▁▁▁▁\n\n\nPossess.Property.Suspected.Stolen\n0\n1\n1.90\n6.85\n0\n0.00\n0.0\n1.00\n124\n▇▁▁▁▁\n\n\nReceiving.Stolen.Property\n0\n1\n0.93\n3.61\n0\n0.00\n0.0\n0.00\n165\n▇▁▁▁▁\n\n\nPossess.etc..Tainted.Property\n0\n1\n3.18\n11.73\n0\n0.00\n0.0\n1.00\n484\n▇▁▁▁▁\n\n\nOther.Handling.Stolen.Goods\n0\n1\n0.09\n0.56\n0\n0.00\n0.0\n0.00\n11\n▇▁▁▁▁\n\n\nOffences.Against.Property\n0\n1\n249.80\n721.82\n0\n5.00\n26.0\n112.00\n9034\n▇▁▁▁▁\n\n\nDrug.Offences\n0\n1\n62.74\n158.60\n0\n1.00\n9.0\n48.00\n2646\n▇▁▁▁▁\n\n\nTrafficking.Drugs\n0\n1\n0.41\n2.14\n0\n0.00\n0.0\n0.00\n130\n▇▁▁▁▁\n\n\nPossess.Drugs\n0\n1\n27.81\n72.63\n0\n0.00\n4.0\n21.00\n1053\n▇▁▁▁▁\n\n\nProduce.Drugs\n0\n1\n1.92\n8.32\n0\n0.00\n0.0\n2.00\n1062\n▇▁▁▁▁\n\n\nSell.Supply.Drugs\n0\n1\n4.44\n28.79\n0\n0.00\n0.0\n1.00\n2228\n▇▁▁▁▁\n\n\nOther.Drug.Offences\n0\n1\n28.16\n69.86\n0\n0.00\n4.0\n22.00\n1013\n▇▁▁▁▁\n\n\nProstitution.Offences\n0\n1\n0.36\n4.28\n0\n0.00\n0.0\n0.00\n176\n▇▁▁▁▁\n\n\nFound.in.Places.Used.for.Purpose.of.Prostitution.Offences\n0\n1\n0.02\n0.39\n0\n0.00\n0.0\n0.00\n19\n▇▁▁▁▁\n\n\nHave.Interest.in.Premises.Used.for.Prostitution.Offences\n0\n1\n0.01\n0.18\n0\n0.00\n0.0\n0.00\n9\n▇▁▁▁▁\n\n\nKnowingly.Participate.in.Provision.Prostitution.Offences\n0\n1\n0.09\n1.04\n0\n0.00\n0.0\n0.00\n56\n▇▁▁▁▁\n\n\nPublic.Soliciting\n0\n1\n0.19\n3.41\n0\n0.00\n0.0\n0.00\n168\n▇▁▁▁▁\n\n\nProcuring.Prostitution\n0\n1\n0.01\n0.22\n0\n0.00\n0.0\n0.00\n15\n▇▁▁▁▁\n\n\nPermit.Minor.to.be.at.a.Place.Used.for.Prostitution.Offences\n0\n1\n0.00\n0.02\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nAdvertising.Prostitution\n0\n1\n0.01\n0.20\n0\n0.00\n0.0\n0.00\n8\n▇▁▁▁▁\n\n\nOther.Prostitution.Offences\n0\n1\n0.02\n0.33\n0\n0.00\n0.0\n0.00\n36\n▇▁▁▁▁\n\n\nLiquor..excl..Drunkenness.\n0\n1\n5.59\n13.81\n0\n0.00\n1.0\n5.00\n307\n▇▁▁▁▁\n\n\nGaming.Racing…Betting.Offences\n0\n1\n0.01\n0.15\n0\n0.00\n0.0\n0.00\n15\n▇▁▁▁▁\n\n\nBreach.Domestic.Violence.Protection.Order\n0\n1\n17.79\n41.03\n0\n1.00\n4.0\n14.00\n529\n▇▁▁▁▁\n\n\nTrespassing.and.Vagrancy\n0\n1\n4.81\n11.69\n0\n0.00\n1.0\n4.00\n319\n▇▁▁▁▁\n\n\nWeapons.Act.Offences\n0\n1\n5.65\n13.44\n0\n0.00\n1.0\n5.00\n328\n▇▁▁▁▁\n\n\nUnlawful.Possess.Concealable.Firearm\n0\n1\n0.16\n0.77\n0\n0.00\n0.0\n0.00\n67\n▇▁▁▁▁\n\n\nUnlawful.Possess.Firearm…Other\n0\n1\n0.76\n1.62\n0\n0.00\n0.0\n1.00\n26\n▇▁▁▁▁\n\n\nBomb.Possess.and.or.use.of\n0\n1\n0.07\n0.39\n0\n0.00\n0.0\n0.00\n11\n▇▁▁▁▁\n\n\nPossess.and.or.use.other.weapons..restricted.items\n0\n1\n2.31\n6.18\n0\n0.00\n0.0\n2.00\n71\n▇▁▁▁▁\n\n\nWeapons.Act.Offences…Other\n0\n1\n2.35\n7.38\n0\n0.00\n0.0\n2.00\n317\n▇▁▁▁▁\n\n\nGood.Order.Offences\n0\n1\n49.65\n117.44\n0\n2.00\n11.0\n38.00\n1248\n▇▁▁▁▁\n\n\nDisobey.Move.on.Direction\n0\n1\n1.03\n3.38\n0\n0.00\n0.0\n0.00\n64\n▇▁▁▁▁\n\n\nResist.Incite.Hinder.Obstruct.Police\n0\n1\n21.09\n47.98\n0\n1.00\n4.0\n16.00\n488\n▇▁▁▁▁\n\n\nFare.Evasion\n0\n1\n3.00\n14.72\n0\n0.00\n0.0\n0.00\n289\n▇▁▁▁▁\n\n\nPublic.Nuisance\n0\n1\n24.53\n57.73\n0\n1.00\n6.0\n20.00\n859\n▇▁▁▁▁\n\n\nStock.Related.Offences\n0\n1\n0.46\n3.57\n0\n0.00\n0.0\n0.00\n360\n▇▁▁▁▁\n\n\nTraffic.and.Related.Offences\n0\n1\n43.19\n94.54\n0\n2.00\n10.0\n38.00\n1214\n▇▁▁▁▁\n\n\nDangerous.Operation.of.a.Vehicle\n0\n1\n1.98\n4.79\n0\n0.00\n0.0\n2.00\n62\n▇▁▁▁▁\n\n\nDrink.Driving\n0\n1\n30.37\n66.90\n0\n1.00\n7.0\n28.00\n991\n▇▁▁▁▁\n\n\nDisqualified.Driving\n0\n1\n10.79\n25.37\n0\n0.00\n2.0\n8.00\n284\n▇▁▁▁▁\n\n\nInterfere.with.Mechanism.of.Motor.Vehicle\n0\n1\n0.05\n0.27\n0\n0.00\n0.0\n0.00\n10\n▇▁▁▁▁\n\n\nMiscellaneous.Offences\n0\n1\n3.36\n12.19\n0\n0.00\n0.0\n2.00\n333\n▇▁▁▁▁\n\n\nOther.Offences\n0\n1\n193.60\n433.73\n0\n13.00\n45.0\n156.00\n4242\n▇▁▁▁▁\n\n\n\n\n\nObviously, being a publicly available dataset, it has already been cleaned for public consumption. In the next code chunk, we will temporarily modify the data set to include missing values and demonstrate the use of the skimr package.\n\n# Make a copy of the raw dataset to modify\ntemp &lt;- raw\n\n# Choose the number of NAs to add\nn_missing_values &lt;- 20\n\n# Sample 20 random row numbers from the total number of rows\nrows_to_replace &lt;- sample(1:nrow(temp), size = n_missing_values)\n\n# Add NA values to the LGA Names column\ntemp$LGA.Name[rows_to_replace] &lt;- NA\n\n# Now, skim the modified data\nskim(temp)\n\n\nData summary\n\n\nName\ntemp\n\n\nNumber of rows\n19812\n\n\nNumber of columns\n91\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n2\n\n\nnumeric\n89\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nLGA.Name\n20\n1\n18\n40\n0\n78\n0\n\n\nMonth.Year\n0\n1\n5\n5\n0\n254\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nX_id\n0\n1\n9906.50\n5719.38\n1\n4953.75\n9906.5\n14859.25\n19812\n▇▇▇▇▇\n\n\nHomicide..Murder.\n0\n1\n0.05\n0.28\n0\n0.00\n0.0\n0.00\n8\n▇▁▁▁▁\n\n\nOther.Homicide\n0\n1\n0.12\n0.51\n0\n0.00\n0.0\n0.00\n17\n▇▁▁▁▁\n\n\nAttempted.Murder\n0\n1\n0.07\n0.41\n0\n0.00\n0.0\n0.00\n14\n▇▁▁▁▁\n\n\nConspiracy.to.Murder\n0\n1\n0.00\n0.05\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nManslaughter..excl..by.driving.\n0\n1\n0.01\n0.09\n0\n0.00\n0.0\n0.00\n3\n▇▁▁▁▁\n\n\nManslaughter.Unlawful.Striking.Causing.Death\n0\n1\n0.00\n0.03\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nDriving.Causing.Death\n0\n1\n0.03\n0.21\n0\n0.00\n0.0\n0.00\n5\n▇▁▁▁▁\n\n\nAssault\n0\n1\n22.75\n48.97\n0\n2.00\n7.0\n18.00\n514\n▇▁▁▁▁\n\n\nGrievous.Assault\n0\n1\n0.98\n2.42\n0\n0.00\n0.0\n1.00\n128\n▇▁▁▁▁\n\n\nSerious.Assault\n0\n1\n10.42\n22.00\n0\n1.00\n3.0\n9.00\n238\n▇▁▁▁▁\n\n\nSerious.Assault..Other.\n0\n1\n2.64\n6.48\n0\n0.00\n0.0\n2.00\n80\n▇▁▁▁▁\n\n\nCommon.Assault.\n0\n1\n8.71\n19.58\n0\n0.00\n2.0\n7.00\n209\n▇▁▁▁▁\n\n\nSexual.Offences\n0\n1\n6.69\n16.76\n0\n0.00\n1.0\n5.00\n765\n▇▁▁▁▁\n\n\nRape.and.Attempted.Rape\n0\n1\n1.82\n4.91\n0\n0.00\n0.0\n1.00\n155\n▇▁▁▁▁\n\n\nOther.Sexual.Offences\n0\n1\n4.87\n13.17\n0\n0.00\n1.0\n3.00\n750\n▇▁▁▁▁\n\n\nRobbery\n0\n1\n2.05\n7.53\n0\n0.00\n0.0\n1.00\n128\n▇▁▁▁▁\n\n\nArmed.Robbery\n0\n1\n1.00\n3.76\n0\n0.00\n0.0\n0.00\n56\n▇▁▁▁▁\n\n\nUnarmed.Robbery\n0\n1\n1.05\n4.01\n0\n0.00\n0.0\n0.00\n74\n▇▁▁▁▁\n\n\nOther.Offences.Against.the.Person\n0\n1\n4.58\n11.23\n0\n0.00\n1.0\n3.00\n145\n▇▁▁▁▁\n\n\nKidnapping…Abduction.etc.\n0\n1\n0.34\n1.14\n0\n0.00\n0.0\n0.00\n29\n▇▁▁▁▁\n\n\nExtortion\n0\n1\n0.07\n0.41\n0\n0.00\n0.0\n0.00\n9\n▇▁▁▁▁\n\n\nStalking\n0\n1\n0.75\n2.24\n0\n0.00\n0.0\n0.00\n34\n▇▁▁▁▁\n\n\nLife.Endangering.Acts\n0\n1\n3.43\n8.27\n0\n0.00\n0.0\n3.00\n107\n▇▁▁▁▁\n\n\nOffences.Against.the.Person\n0\n1\n36.25\n80.56\n0\n3.00\n9.0\n26.00\n1245\n▇▁▁▁▁\n\n\nUnlawful.Entry\n0\n1\n49.08\n147.27\n0\n1.00\n7.0\n23.00\n2418\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Intent…Dwelling\n0\n1\n28.96\n92.70\n0\n0.00\n3.0\n11.00\n1712\n▇▁▁▁▁\n\n\nUnlawful.Entry.Without.Violence…Dwelling\n0\n1\n28.30\n91.39\n0\n0.00\n2.0\n11.00\n1691\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Violence…Dwelling\n0\n1\n0.66\n1.67\n0\n0.00\n0.0\n1.00\n21\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Intent…Shop\n0\n1\n4.43\n14.64\n0\n0.00\n0.0\n2.00\n264\n▇▁▁▁▁\n\n\nUnlawful.Entry.With.Intent…Other\n0\n1\n15.69\n42.23\n0\n0.00\n3.0\n10.00\n611\n▇▁▁▁▁\n\n\nArson\n0\n1\n1.45\n3.90\n0\n0.00\n0.0\n1.00\n46\n▇▁▁▁▁\n\n\nOther.Property.Damage\n0\n1\n43.63\n114.76\n0\n1.00\n7.0\n25.00\n1912\n▇▁▁▁▁\n\n\nUnlawful.Use.of.Motor.Vehicle\n0\n1\n13.54\n43.59\n0\n0.00\n1.0\n5.00\n717\n▇▁▁▁▁\n\n\nOther.Theft..excl..Unlawful.Entry.\n0\n1\n110.57\n323.86\n0\n1.00\n9.0\n47.00\n3609\n▇▁▁▁▁\n\n\nStealing.from.Dwellings\n0\n1\n8.34\n20.82\n0\n0.00\n1.0\n5.00\n241\n▇▁▁▁▁\n\n\nShop.Stealing\n0\n1\n18.88\n62.43\n0\n0.00\n1.0\n6.00\n951\n▇▁▁▁▁\n\n\nVehicles..steal.from.enter.with.intent.\n0\n1\n31.75\n95.53\n0\n0.00\n2.0\n12.00\n1325\n▇▁▁▁▁\n\n\nOther.Stealing\n0\n1\n51.59\n152.01\n0\n0.00\n4.0\n24.00\n1714\n▇▁▁▁▁\n\n\nFraud\n0\n1\n25.43\n94.24\n0\n0.00\n1.0\n9.00\n1980\n▇▁▁▁▁\n\n\nFraud.by.Computer\n0\n1\n1.13\n14.49\n0\n0.00\n0.0\n0.00\n1290\n▇▁▁▁▁\n\n\nFraud.by.Cheque\n0\n1\n1.14\n6.41\n0\n0.00\n0.0\n0.00\n258\n▇▁▁▁▁\n\n\nFraud.by.Credit.Card\n0\n1\n8.45\n33.42\n0\n0.00\n0.0\n1.00\n733\n▇▁▁▁▁\n\n\nIdentity.Fraud\n0\n1\n0.79\n5.06\n0\n0.00\n0.0\n0.00\n222\n▇▁▁▁▁\n\n\nOther.Fraud\n0\n1\n13.92\n60.48\n0\n0.00\n0.0\n4.00\n1957\n▇▁▁▁▁\n\n\nHandling.Stolen.Goods\n0\n1\n6.10\n20.27\n0\n0.00\n0.0\n3.00\n498\n▇▁▁▁▁\n\n\nPossess.Property.Suspected.Stolen\n0\n1\n1.90\n6.85\n0\n0.00\n0.0\n1.00\n124\n▇▁▁▁▁\n\n\nReceiving.Stolen.Property\n0\n1\n0.93\n3.61\n0\n0.00\n0.0\n0.00\n165\n▇▁▁▁▁\n\n\nPossess.etc..Tainted.Property\n0\n1\n3.18\n11.73\n0\n0.00\n0.0\n1.00\n484\n▇▁▁▁▁\n\n\nOther.Handling.Stolen.Goods\n0\n1\n0.09\n0.56\n0\n0.00\n0.0\n0.00\n11\n▇▁▁▁▁\n\n\nOffences.Against.Property\n0\n1\n249.80\n721.82\n0\n5.00\n26.0\n112.00\n9034\n▇▁▁▁▁\n\n\nDrug.Offences\n0\n1\n62.74\n158.60\n0\n1.00\n9.0\n48.00\n2646\n▇▁▁▁▁\n\n\nTrafficking.Drugs\n0\n1\n0.41\n2.14\n0\n0.00\n0.0\n0.00\n130\n▇▁▁▁▁\n\n\nPossess.Drugs\n0\n1\n27.81\n72.63\n0\n0.00\n4.0\n21.00\n1053\n▇▁▁▁▁\n\n\nProduce.Drugs\n0\n1\n1.92\n8.32\n0\n0.00\n0.0\n2.00\n1062\n▇▁▁▁▁\n\n\nSell.Supply.Drugs\n0\n1\n4.44\n28.79\n0\n0.00\n0.0\n1.00\n2228\n▇▁▁▁▁\n\n\nOther.Drug.Offences\n0\n1\n28.16\n69.86\n0\n0.00\n4.0\n22.00\n1013\n▇▁▁▁▁\n\n\nProstitution.Offences\n0\n1\n0.36\n4.28\n0\n0.00\n0.0\n0.00\n176\n▇▁▁▁▁\n\n\nFound.in.Places.Used.for.Purpose.of.Prostitution.Offences\n0\n1\n0.02\n0.39\n0\n0.00\n0.0\n0.00\n19\n▇▁▁▁▁\n\n\nHave.Interest.in.Premises.Used.for.Prostitution.Offences\n0\n1\n0.01\n0.18\n0\n0.00\n0.0\n0.00\n9\n▇▁▁▁▁\n\n\nKnowingly.Participate.in.Provision.Prostitution.Offences\n0\n1\n0.09\n1.04\n0\n0.00\n0.0\n0.00\n56\n▇▁▁▁▁\n\n\nPublic.Soliciting\n0\n1\n0.19\n3.41\n0\n0.00\n0.0\n0.00\n168\n▇▁▁▁▁\n\n\nProcuring.Prostitution\n0\n1\n0.01\n0.22\n0\n0.00\n0.0\n0.00\n15\n▇▁▁▁▁\n\n\nPermit.Minor.to.be.at.a.Place.Used.for.Prostitution.Offences\n0\n1\n0.00\n0.02\n0\n0.00\n0.0\n0.00\n2\n▇▁▁▁▁\n\n\nAdvertising.Prostitution\n0\n1\n0.01\n0.20\n0\n0.00\n0.0\n0.00\n8\n▇▁▁▁▁\n\n\nOther.Prostitution.Offences\n0\n1\n0.02\n0.33\n0\n0.00\n0.0\n0.00\n36\n▇▁▁▁▁\n\n\nLiquor..excl..Drunkenness.\n0\n1\n5.59\n13.81\n0\n0.00\n1.0\n5.00\n307\n▇▁▁▁▁\n\n\nGaming.Racing…Betting.Offences\n0\n1\n0.01\n0.15\n0\n0.00\n0.0\n0.00\n15\n▇▁▁▁▁\n\n\nBreach.Domestic.Violence.Protection.Order\n0\n1\n17.79\n41.03\n0\n1.00\n4.0\n14.00\n529\n▇▁▁▁▁\n\n\nTrespassing.and.Vagrancy\n0\n1\n4.81\n11.69\n0\n0.00\n1.0\n4.00\n319\n▇▁▁▁▁\n\n\nWeapons.Act.Offences\n0\n1\n5.65\n13.44\n0\n0.00\n1.0\n5.00\n328\n▇▁▁▁▁\n\n\nUnlawful.Possess.Concealable.Firearm\n0\n1\n0.16\n0.77\n0\n0.00\n0.0\n0.00\n67\n▇▁▁▁▁\n\n\nUnlawful.Possess.Firearm…Other\n0\n1\n0.76\n1.62\n0\n0.00\n0.0\n1.00\n26\n▇▁▁▁▁\n\n\nBomb.Possess.and.or.use.of\n0\n1\n0.07\n0.39\n0\n0.00\n0.0\n0.00\n11\n▇▁▁▁▁\n\n\nPossess.and.or.use.other.weapons..restricted.items\n0\n1\n2.31\n6.18\n0\n0.00\n0.0\n2.00\n71\n▇▁▁▁▁\n\n\nWeapons.Act.Offences…Other\n0\n1\n2.35\n7.38\n0\n0.00\n0.0\n2.00\n317\n▇▁▁▁▁\n\n\nGood.Order.Offences\n0\n1\n49.65\n117.44\n0\n2.00\n11.0\n38.00\n1248\n▇▁▁▁▁\n\n\nDisobey.Move.on.Direction\n0\n1\n1.03\n3.38\n0\n0.00\n0.0\n0.00\n64\n▇▁▁▁▁\n\n\nResist.Incite.Hinder.Obstruct.Police\n0\n1\n21.09\n47.98\n0\n1.00\n4.0\n16.00\n488\n▇▁▁▁▁\n\n\nFare.Evasion\n0\n1\n3.00\n14.72\n0\n0.00\n0.0\n0.00\n289\n▇▁▁▁▁\n\n\nPublic.Nuisance\n0\n1\n24.53\n57.73\n0\n1.00\n6.0\n20.00\n859\n▇▁▁▁▁\n\n\nStock.Related.Offences\n0\n1\n0.46\n3.57\n0\n0.00\n0.0\n0.00\n360\n▇▁▁▁▁\n\n\nTraffic.and.Related.Offences\n0\n1\n43.19\n94.54\n0\n2.00\n10.0\n38.00\n1214\n▇▁▁▁▁\n\n\nDangerous.Operation.of.a.Vehicle\n0\n1\n1.98\n4.79\n0\n0.00\n0.0\n2.00\n62\n▇▁▁▁▁\n\n\nDrink.Driving\n0\n1\n30.37\n66.90\n0\n1.00\n7.0\n28.00\n991\n▇▁▁▁▁\n\n\nDisqualified.Driving\n0\n1\n10.79\n25.37\n0\n0.00\n2.0\n8.00\n284\n▇▁▁▁▁\n\n\nInterfere.with.Mechanism.of.Motor.Vehicle\n0\n1\n0.05\n0.27\n0\n0.00\n0.0\n0.00\n10\n▇▁▁▁▁\n\n\nMiscellaneous.Offences\n0\n1\n3.36\n12.19\n0\n0.00\n0.0\n2.00\n333\n▇▁▁▁▁\n\n\nOther.Offences\n0\n1\n193.60\n433.73\n0\n13.00\n45.0\n156.00\n4242\n▇▁▁▁▁\n\n\n\n\n\nNotice now that LGA.Name has 20 missing values, while Month.Year has none.\nActivity: Review your data and identify blank cells, NA values, and other potential issues."
  },
  {
    "objectID": "index.html#data-cleaning-and-manipulation",
    "href": "index.html#data-cleaning-and-manipulation",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Data Cleaning and Manipulation",
    "text": "Data Cleaning and Manipulation\nNow that your raw data has been loaded, we can start getting ready for analysis. As a general rule, I format the entire data set first because it reduces duplication. If I extract a subset (e.g. burglary offences) and then format that dataset, I will also have to format subsequent datasets, often using the exact code. However, if you create a subset and then decide you want to add or amend a variable for any reason, you can go back to your formatting section, rerun your code, and the amendment can be included in your subset data.\nThis is where we roll up our sleeves and get the data into a usable format. We’ll use functions from the dplyr package.\nAs noted earlier, I like to leave my raw data as is. To do this, I will duplicate the raw data frame (commonly abbreviated as ‘df’) using the code below.\n\ndf &lt;- raw\n\n\nRename Columns\nColumn names are often messy. Let’s make them clean and consistent (e.g., lower-case with underscores). You can call single columns, multiple columns consecutively, or explicitly rename columns. The method you use will come down to the dataset/s you have and your personal preferences. Here, I present two methods for changing column names. When I started, I predominantly used the base R colnames() method. I still use the base R method if I need to rename a large number of columns. However, I find I am using the tidyverse method more and more, particularly given that this allows me to pipe |&gt; (chain together) multiple cleaning functions together (e.g. new_df &lt;- df |&gt; rename() |&gt; mutate(new_date = ...). Explaining pipes in detail is beyond the scope of this guide, but having an understanding that they can improve your workflow as you build your skills is worthwhile.\nNote: when renaming columns, don’t use spaces. This will complicate things down the track. Use snake_case or separate words with ‘.’.\n\n## Tidyverse method\n# The syntax is rename(new_name = old_name)\ndf &lt;- df |&gt;\n  rename(\n    murder = `Homicide..Murder.`,\n    UEWI_dwell = `Unlawful.Entry.Without.Violence...Dwelling`,\n    UEWI_dwell_vio = `Unlawful.Entry.With.Violence...Dwelling`\n  )\n\n# Display the first few row with the new names\nhead(df, n=1)\n\n  X_id              LGA.Name Month.Year murder Other.Homicide Attempted.Murder\n1    1 Aurukun Shire Council      JAN01      0              0                0\n  Conspiracy.to.Murder Manslaughter..excl..by.driving.\n1                    0                               0\n  Manslaughter.Unlawful.Striking.Causing.Death Driving.Causing.Death Assault\n1                                            0                     0      13\n  Grievous.Assault Serious.Assault Serious.Assault..Other. Common.Assault.\n1                0               4                       1               8\n  Sexual.Offences Rape.and.Attempted.Rape Other.Sexual.Offences Robbery\n1               0                       0                     0       0\n  Armed.Robbery Unarmed.Robbery Other.Offences.Against.the.Person\n1             0               0                                 0\n  Kidnapping...Abduction.etc. Extortion Stalking Life.Endangering.Acts\n1                           0         0        0                     0\n  Offences.Against.the.Person Unlawful.Entry\n1                          13              3\n  Unlawful.Entry.With.Intent...Dwelling UEWI_dwell UEWI_dwell_vio\n1                                     2          1              1\n  Unlawful.Entry.With.Intent...Shop Unlawful.Entry.With.Intent...Other Arson\n1                                 0                                  1     1\n  Other.Property.Damage Unlawful.Use.of.Motor.Vehicle\n1                     5                             3\n  Other.Theft..excl..Unlawful.Entry. Stealing.from.Dwellings Shop.Stealing\n1                                  2                       0             0\n  Vehicles..steal.from.enter.with.intent. Other.Stealing Fraud\n1                                       0              2     0\n  Fraud.by.Computer Fraud.by.Cheque Fraud.by.Credit.Card Identity.Fraud\n1                 0               0                    0              0\n  Other.Fraud Handling.Stolen.Goods Possess.Property.Suspected.Stolen\n1           0                     2                                 0\n  Receiving.Stolen.Property Possess.etc..Tainted.Property\n1                         2                             0\n  Other.Handling.Stolen.Goods Offences.Against.Property Drug.Offences\n1                           0                        16             0\n  Trafficking.Drugs Possess.Drugs Produce.Drugs Sell.Supply.Drugs\n1                 0             0             0                 0\n  Other.Drug.Offences Prostitution.Offences\n1                   0                     0\n  Found.in.Places.Used.for.Purpose.of.Prostitution.Offences\n1                                                         0\n  Have.Interest.in.Premises.Used.for.Prostitution.Offences\n1                                                        0\n  Knowingly.Participate.in.Provision.Prostitution.Offences Public.Soliciting\n1                                                        0                 0\n  Procuring.Prostitution\n1                      0\n  Permit.Minor.to.be.at.a.Place.Used.for.Prostitution.Offences\n1                                                            0\n  Advertising.Prostitution Other.Prostitution.Offences\n1                        0                           0\n  Liquor..excl..Drunkenness. Gaming.Racing...Betting.Offences\n1                          0                                0\n  Breach.Domestic.Violence.Protection.Order Trespassing.and.Vagrancy\n1                                         2                        1\n  Weapons.Act.Offences Unlawful.Possess.Concealable.Firearm\n1                    1                                    0\n  Unlawful.Possess.Firearm...Other Bomb.Possess.and.or.use.of\n1                                0                          0\n  Possess.and.or.use.other.weapons..restricted.items\n1                                                  0\n  Weapons.Act.Offences...Other Good.Order.Offences Disobey.Move.on.Direction\n1                            1                  27                         0\n  Resist.Incite.Hinder.Obstruct.Police Fare.Evasion Public.Nuisance\n1                                   12            0              15\n  Stock.Related.Offences Traffic.and.Related.Offences\n1                      0                            6\n  Dangerous.Operation.of.a.Vehicle Drink.Driving Disqualified.Driving\n1                                0             4                    2\n  Interfere.with.Mechanism.of.Motor.Vehicle Miscellaneous.Offences\n1                                         0                      0\n  Other.Offences\n1             37\n\n## Base R Method\n# Display all of the current colnames in your console\ncolnames(df)\n\n [1] \"X_id\"                                                        \n [2] \"LGA.Name\"                                                    \n [3] \"Month.Year\"                                                  \n [4] \"murder\"                                                      \n [5] \"Other.Homicide\"                                              \n [6] \"Attempted.Murder\"                                            \n [7] \"Conspiracy.to.Murder\"                                        \n [8] \"Manslaughter..excl..by.driving.\"                             \n [9] \"Manslaughter.Unlawful.Striking.Causing.Death\"                \n[10] \"Driving.Causing.Death\"                                       \n[11] \"Assault\"                                                     \n[12] \"Grievous.Assault\"                                            \n[13] \"Serious.Assault\"                                             \n[14] \"Serious.Assault..Other.\"                                     \n[15] \"Common.Assault.\"                                             \n[16] \"Sexual.Offences\"                                             \n[17] \"Rape.and.Attempted.Rape\"                                     \n[18] \"Other.Sexual.Offences\"                                       \n[19] \"Robbery\"                                                     \n[20] \"Armed.Robbery\"                                               \n[21] \"Unarmed.Robbery\"                                             \n[22] \"Other.Offences.Against.the.Person\"                           \n[23] \"Kidnapping...Abduction.etc.\"                                 \n[24] \"Extortion\"                                                   \n[25] \"Stalking\"                                                    \n[26] \"Life.Endangering.Acts\"                                       \n[27] \"Offences.Against.the.Person\"                                 \n[28] \"Unlawful.Entry\"                                              \n[29] \"Unlawful.Entry.With.Intent...Dwelling\"                       \n[30] \"UEWI_dwell\"                                                  \n[31] \"UEWI_dwell_vio\"                                              \n[32] \"Unlawful.Entry.With.Intent...Shop\"                           \n[33] \"Unlawful.Entry.With.Intent...Other\"                          \n[34] \"Arson\"                                                       \n[35] \"Other.Property.Damage\"                                       \n[36] \"Unlawful.Use.of.Motor.Vehicle\"                               \n[37] \"Other.Theft..excl..Unlawful.Entry.\"                          \n[38] \"Stealing.from.Dwellings\"                                     \n[39] \"Shop.Stealing\"                                               \n[40] \"Vehicles..steal.from.enter.with.intent.\"                     \n[41] \"Other.Stealing\"                                              \n[42] \"Fraud\"                                                       \n[43] \"Fraud.by.Computer\"                                           \n[44] \"Fraud.by.Cheque\"                                             \n[45] \"Fraud.by.Credit.Card\"                                        \n[46] \"Identity.Fraud\"                                              \n[47] \"Other.Fraud\"                                                 \n[48] \"Handling.Stolen.Goods\"                                       \n[49] \"Possess.Property.Suspected.Stolen\"                           \n[50] \"Receiving.Stolen.Property\"                                   \n[51] \"Possess.etc..Tainted.Property\"                               \n[52] \"Other.Handling.Stolen.Goods\"                                 \n[53] \"Offences.Against.Property\"                                   \n[54] \"Drug.Offences\"                                               \n[55] \"Trafficking.Drugs\"                                           \n[56] \"Possess.Drugs\"                                               \n[57] \"Produce.Drugs\"                                               \n[58] \"Sell.Supply.Drugs\"                                           \n[59] \"Other.Drug.Offences\"                                         \n[60] \"Prostitution.Offences\"                                       \n[61] \"Found.in.Places.Used.for.Purpose.of.Prostitution.Offences\"   \n[62] \"Have.Interest.in.Premises.Used.for.Prostitution.Offences\"    \n[63] \"Knowingly.Participate.in.Provision.Prostitution.Offences\"    \n[64] \"Public.Soliciting\"                                           \n[65] \"Procuring.Prostitution\"                                      \n[66] \"Permit.Minor.to.be.at.a.Place.Used.for.Prostitution.Offences\"\n[67] \"Advertising.Prostitution\"                                    \n[68] \"Other.Prostitution.Offences\"                                 \n[69] \"Liquor..excl..Drunkenness.\"                                  \n[70] \"Gaming.Racing...Betting.Offences\"                            \n[71] \"Breach.Domestic.Violence.Protection.Order\"                   \n[72] \"Trespassing.and.Vagrancy\"                                    \n[73] \"Weapons.Act.Offences\"                                        \n[74] \"Unlawful.Possess.Concealable.Firearm\"                        \n[75] \"Unlawful.Possess.Firearm...Other\"                            \n[76] \"Bomb.Possess.and.or.use.of\"                                  \n[77] \"Possess.and.or.use.other.weapons..restricted.items\"          \n[78] \"Weapons.Act.Offences...Other\"                                \n[79] \"Good.Order.Offences\"                                         \n[80] \"Disobey.Move.on.Direction\"                                   \n[81] \"Resist.Incite.Hinder.Obstruct.Police\"                        \n[82] \"Fare.Evasion\"                                                \n[83] \"Public.Nuisance\"                                             \n[84] \"Stock.Related.Offences\"                                      \n[85] \"Traffic.and.Related.Offences\"                                \n[86] \"Dangerous.Operation.of.a.Vehicle\"                            \n[87] \"Drink.Driving\"                                               \n[88] \"Disqualified.Driving\"                                        \n[89] \"Interfere.with.Mechanism.of.Motor.Vehicle\"                   \n[90] \"Miscellaneous.Offences\"                                      \n[91] \"Other.Offences\"                                              \n\n# Explicitly rename the 5th column\ncolnames(df)[5]\n\n[1] \"Other.Homicide\"\n\ncolnames(df)[5] &lt;- \"oth_homic\"\ncolnames(df)[5]\n\n[1] \"oth_homic\"\n\n# Explicitly rename columns 1 through to three\ncolnames(df)[1:3]\n\n[1] \"X_id\"       \"LGA.Name\"   \"Month.Year\"\n\ncolnames(df)[1:3] &lt;- c(\"id\", \"lga\", \"my\")\ncolnames(df)[1:3]\n\n[1] \"id\"  \"lga\" \"my\" \n\n\n\n\nFormatting Dates\nThis is the stage of the process that has caused me the most grief in the past and is usually where I come unstuck today. Covering all of the different date formats is beyond the scope of this page. However, there are an abundance of guides. If you use the lubridate package, you can get the list of arguments and formats by typing ??lubridate or help(package = \"lubridate\") into your console.\n\n# First, ensure the date column is in the correct format using lubridate\ndf &lt;- df |&gt;\n  mutate(\n    # mdy() parses dates in Month-Day-Year format. Use other functions \n    # like dmy() or ymd() depending on your data.\n    # for this data set we will use my because our unformated data is like JAN01\n    offence_date = lubridate::my(my)  # \n  )\n\nNote: We created a new date variable offence_date.\n\n\nCreate Conditional Columns\nYou might need to create new variables based on existing data. A common task is creating an “experimental” vs. “control” group based on a date, or classifying time periods. In this example, we use mutate() combined with the if_else function. I also demonstrate ifelse() function to highlight an alternative method. It is worth noting that if_else() only handles two conditions. For the sake of brevity, we won’t cover all of the different options for multiple conditions here. However, if you would like to know how to handle the creation of multiple conditions (e.g ‘pre’, ‘during’, ‘post’), look to combine the mutate() and case_when functions.\nHere, we’ll create a period column to distinguish between data before and after an intervention date (e.g., July 1st, 2020).\n\n# Now, create the conditional column\ndf &lt;- df |&gt;\n  dplyr::mutate(\n    intervention_period = if_else(\n      offence_date &gt;= ymd(\"2020-07-01\"),\n      \"Post-Intervention\",\n      \"Pre-Intervention\"\n    )\n  )\n\n# An alternative method\ndf$intervention_period &lt;- ifelse(df$offence_date &gt;= \"2020-07-01\", \n                        \"Post\", \"Pre\")\n\n# Check the result\nunique(df$intervention_period) # Idnetifies the unique values for a given column\n\n[1] \"Pre\"  \"Post\"\n\n\nNote: As I have loaded additional packages to complete various analytical processes, I have found that some functions need to be called explicitly from their owning package to work effectively. I have found that I commonly need to do this for functions from the dplyr package. For example, in the code chunk above, I have explicitly called the mutate functions by typing dplyr::mutate(...) as opposed to mutate(...).\n\n\n\nSelect Columns and Filter Rows\nYou rarely need all the columns or rows from the original dataset, or you may want to focus on a subset of your data.\n\n# Let's keep only the columns we need and filter for a specific offence type\nipswich_lga &lt;- df |&gt;\n  select(lga, offence_date, UEWI_dwell_vio, intervention_period) |&gt; # select the specific column you want to keep\n  filter(lga == \"Ipswich City Council\") # filters the rows based on the variables within a column\n\n# Check results\nhead(ipswich_lga, n = 10)\n\n                    lga offence_date UEWI_dwell_vio intervention_period\n1  Ipswich City Council   2001-01-01              1                 Pre\n2  Ipswich City Council   2001-02-01              1                 Pre\n3  Ipswich City Council   2001-03-01              4                 Pre\n4  Ipswich City Council   2001-04-01              2                 Pre\n5  Ipswich City Council   2001-05-01              2                 Pre\n6  Ipswich City Council   2001-06-01              1                 Pre\n7  Ipswich City Council   2001-07-01              1                 Pre\n8  Ipswich City Council   2001-08-01              2                 Pre\n9  Ipswich City Council   2001-09-01              0                 Pre\n10 Ipswich City Council   2001-10-01              3                 Pre"
  },
  {
    "objectID": "index.html#basic-visualisation-with-ggplot2",
    "href": "index.html#basic-visualisation-with-ggplot2",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Basic Visualisation with ggplot2",
    "text": "Basic Visualisation with ggplot2\nA picture is worth a thousand words and is a fundamental tool for communicating the results of any analytical process. ggplot2 is definitely my preferred tool for data visualisation in R.\n\nA Basic Bar Chart\nIn our initial example, let’s explore how frequently burglary with violence occurs in Queensland Local Government Areas (LGAs) by visualising the number of recorded offences per month.\n\nggplot(data = df, aes(x = UEWI_dwell_vio)) +\n  geom_bar() +\n  labs(\n    title = \"Frequency of Monthly Violent Burglaries Across Queensland LGAs\",\n    x = \"Number of Offences Committed within LGAs\",\n    y = \"Number of Months\"\n  ) +\n  theme_minimal()\n\n\n\nA Bar Chart with X and Y Variables\nThis type of chart is perfect for showing summarised data. You typically create a summary table first, then plot that. This is best done using geom_col().\n\nggplot(data = ipswich_lga, aes(x = offence_date, y = UEWI_dwell_vio)) +\n  geom_col() +\n  labs(\n    title = \"Frequency of Violent Burglaries per Month\",\n    x = \"Month Year\",\n    y = \"Number of Violent Burglaries\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\nPiped ggplot\nThe code format displayed for ggplot is precisely how I first learnt R. However, as time has progressed, I have preferred to pipe my data into ggplot, allowing me to include additional pipes to visualise my data without creating another distinct data frame.\n\ndf |&gt; \n  filter(lga == \"Brisbane City Council\") |&gt; # Added filter to summarise the data for Brisbane, rather than create a new df\n  ggplot(aes(offence_date, UEWI_dwell_vio)) + \n  geom_col() +\n  labs(\n    title = \"Frequency of Violent Burglaries per Month\",\n    x = \"Month Year\",\n    y = \"Number of Violent Burglaries\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nA Piped Chart with a Legend\nTo add more detail, you can map a variable to an aesthetic like fill for bar charts or color for line charts. This will automatically generate a legend. Let’s create a new variable for the day of the week and see how offences are distributed across periods.\n\ndf |&gt; \n  filter(lga == \"Brisbane City Council\" | lga == \"Ipswich City Council\") |&gt; # Filter is now looking for Brisbane OR Ipswich City Council data\n  ggplot(aes(offence_date, UEWI_dwell_vio, fill = lga)) + \n  geom_col(position = \"dodge\") + # Seperate the bars, as opposed to stacked\n  labs(\n    title = \"Frequency of Violent Burglaries per Month\",\n    x = \"Month Year\",\n    y = \"Number of Violent Burglaries\",\n    fill = \"LGA\" # Renames the legend from \"lga\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\nAggregating and Plotting Data with Pipes\nAt the start of this section, we created a basic bar chart exploring the frequency of violent burglary counts in LGAs across Queensland. This time, we are going to use pipes |&gt; to aggregate violent burglary counts for all of Queensland to visualise the distribution of offence counts across Queensland.\n\ndf |&gt;\n  group_by(offence_date) |&gt; # group the data by month year, irrespective of the LGA\n  summarise(count = sum(UEWI_dwell_vio)) |&gt; # aggregate the violent burglary counts, createing a new variable name 'count'\n  ggplot(aes(count)) + # plot the new 'count' variable.\n  geom_bar() +\n  labs(\n    title = \"Frequency of Monthly Violent Burglary Counts in Queensland\",\n    x = \"Count of Monthly Offences\",\n    y = \"Number of Months\"\n  )"
  },
  {
    "objectID": "index.html#dynamic-in-text-reporting",
    "href": "index.html#dynamic-in-text-reporting",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Dynamic In-text Reporting",
    "text": "Dynamic In-text Reporting\nQuarto allows you to embed R code directly into your text. This is perfect for reporting summary statistics that automatically update if your data changes.\nTo do this, you enclose R code in back ticks like this: `r format(Sys.Date(), \"%Y\")` displays 2025.\n\nExample\nThe dataset contains a total of 19812 rows of data. The date range for this data is from `r min(df$offence_date, na.rm = TRUE` 2001-01-01 to `r max(df$offence_date, na.rm = TRUE` 2022-02-01."
  },
  {
    "objectID": "index.html#useful-analytical-packages",
    "href": "index.html#useful-analytical-packages",
    "title": "A Guide to Crime Data Cleaning & Preparation in RStudio",
    "section": "Useful Analytical Packages",
    "text": "Useful Analytical Packages\nProviding a detailed review of the different analytical packages I have used or experimented with is well beyond the scope of this guide. However, I can provide you with a list of packages I have used regularly, in an effort to get you started.\n\nThe MASS package has been useful for deploying non-parametric regression models.\nThe fpp3 package, and accompanying ebook, has helped me with time series analysis\nThe sf and tmap packages are great for mapping spatial data\nThe pglm package has been useful for running panel generalised linear models."
  }
]